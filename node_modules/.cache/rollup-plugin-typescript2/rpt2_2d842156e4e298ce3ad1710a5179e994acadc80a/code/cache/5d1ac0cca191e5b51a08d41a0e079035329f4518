{"code":"import { R } from 'lib/utils';\r\nimport { useFormValidator } from './useValidator';\r\nexport function useForm(formFields, callbacks) {\r\n    const form = Object\r\n        .entries(formFields)\r\n        .reduce((acc, [key, value]) => ({\r\n        ...acc,\r\n        [key]: value\r\n    }), {});\r\n    const { hasError } = useFormValidator(Object.values(formFields));\r\n    return {\r\n        form,\r\n        hasError,\r\n        formHasChanges: () => Object\r\n            .values(form)\r\n            .some(field => field.hasChange),\r\n        setError: (field, errorMessage) => {\r\n            form[field].setError(errorMessage);\r\n            R.ifDefined(callbacks.onError, onError => onError({\r\n                [field]: errorMessage\r\n            }));\r\n        },\r\n        submit: () => {\r\n            const errors = Object\r\n                .values(form)\r\n                .map(field => ({\r\n                key: field.key,\r\n                errorMessage: field.validateOnSubmit()\r\n            }))\r\n                .filter(field => Boolean(field.errorMessage))\r\n                .reduce((acc, { key, errorMessage }) => ({\r\n                ...acc,\r\n                [key]: errorMessage\r\n            }), {});\r\n            const hasErrors = Object.values(errors).length > 0;\r\n            if (hasErrors) {\r\n                return R.ifDefined(callbacks.onError, onError => onError(errors));\r\n            }\r\n            const parsedForm = Object\r\n                .values(form)\r\n                .reduce((acc, { key, value, submitParser }) => ({\r\n                ...acc,\r\n                [key]: submitParser\r\n                    ? submitParser(value)\r\n                    : value,\r\n            }), {});\r\n            callbacks.onSuccess(parsedForm);\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=useForm.js.map","references":["/Users/grzegorztarnopolski/Documents/projects/react-form-builder-v2/src/lib/utils/index.ts","/Users/grzegorztarnopolski/Documents/projects/react-form-builder-v2/src/main/types.ts","/Users/grzegorztarnopolski/Documents/projects/react-form-builder-v2/src/main/useValidator.ts"],"map":"{\"version\":3,\"file\":\"useForm.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/main/useForm.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,CAAC,EAAE,MAAM,WAAW,CAAA;AAE7B,OAAO,EAAE,gBAAgB,EAAE,MAAM,gBAAgB,CAAA;AAOjD,MAAM,UAAU,OAAO,CACnB,UAA2C,EAC3C,SAA+B;IAE/B,MAAM,IAAI,GAAG,MAAM;SACd,OAAO,CAAC,UAAU,CAAC;SACnB,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC;QAC5B,GAAG,GAAG;QACN,CAAC,GAAG,CAAC,EAAE,KAAK;KACf,CAAC,EAAE,EAAE,CAAoC,CAAA;IAE9C,MAAM,EAAE,QAAQ,EAAE,GAAG,gBAAgB,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAA;IAEhE,OAAO;QACH,IAAI;QACJ,QAAQ;QACR,cAAc,EAAE,GAAG,EAAE,CAAC,MAAM;aACvB,MAAM,CAAiB,IAAI,CAAC;aAC5B,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC;QACnC,QAAQ,EAAE,CAAC,KAAc,EAAE,YAAoB,EAAE,EAAE;YAC/C,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAA;YAElC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC;gBAC9C,CAAC,KAAK,CAAC,EAAE,YAAY;aACxB,CAAC,CAAC,CAAA;QACP,CAAC;QACD,MAAM,EAAE,GAAG,EAAE;YACT,MAAM,MAAM,GAAG,MAAM;iBAChB,MAAM,CAAiB,IAAI,CAAC;iBAC5B,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBACX,GAAG,EAAE,KAAK,CAAC,GAAG;gBACd,YAAY,EAAE,KAAK,CAAC,gBAAgB,EAAE;aACzC,CAAC,CAAC;iBACF,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;iBAC5C,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,GAAG,EAAE,YAAY,EAAC,EAAE,EAAE,CAAC,CAAC;gBACpC,GAAG,GAAG;gBACN,CAAC,GAAG,CAAC,EAAE,YAAY;aACtB,CAAC,EAAE,EAAE,CAAC,CAAA;YACX,MAAM,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,CAAC,CAAA;YAElD,IAAI,SAAS,EAAE;gBACX,OAAO,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAA;aACpE;YAED,MAAM,UAAU,GAAG,MAAM;iBACpB,MAAM,CAAiB,IAAI,CAAC;iBAC5B,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,YAAY,EAAE,EAAE,EAAE,CAAC,CAAC;gBAC5C,GAAG,GAAG;gBACN,CAAC,GAAG,CAAC,EAAE,YAAY;oBACf,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC;oBACrB,CAAC,CAAC,KAAK;aACd,CAAC,EAAE,EAAE,CAAM,CAAA;YAEhB,SAAS,CAAC,SAAS,CAAC,UAAU,CAAC,CAAA;QACnC,CAAC;KACJ,CAAA;AACL,CAAC\"}"}
